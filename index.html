<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta charset="UTF-8">
<title>AÅŸk Olsun</title>

<style>
body{
margin:0;
overflow:hidden;
background:#111;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

canvas{
background:#1c4c2b;
width:360px;
height:640px;
border-radius:15px;
display:none;
}

.screen{
color:white;
text-align:center;
}

button{
padding:12px 20px;
font-size:18px;
margin:10px;
border:none;
border-radius:10px;
background:#ff4d6d;
color:white;
}

#envelope{
font-size:90px;
cursor:pointer;
}

#lovePhoto{
width:260px;
border-radius:20px;
margin-top:20px;
display:none;
}
</style>
</head>

<body>

<div id="menu" class="screen">
<h1>AÅK GÃœCÃœ â¤ï¸</h1>
<p>Karakter SeÃ§</p>

<button onclick="selectCharacter('erkek')">ğŸ‘¨ Selami</button>
<button onclick="selectCharacter('kadin')">ğŸ‘© EÅŸim</button>
</div>

<div id="messageScreen" class="screen" style="display:none;">
<h2 id="romanticText"></h2>
</div>

<div id="finalScreen" class="screen" style="display:none;">
<h2>Oyun Bitti â¤ï¸</h2>

<p>Skor: <span id="lastScore"></span></p>

<div id="envelope" onclick="openLetter()">ğŸ’Œ</div>

<img id="lovePhoto" src="https://i.imgur.com/W2Y7G4G.jpeg">

<button onclick="restart()">Tekrar Oyna</button>
</div>

<canvas id="game"></canvas>

<script>

let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");

canvas.width=360;
canvas.height=640;

let player={x:140,y:canvas.height-80};
let monsters=[];
let hearts=[];

let score=0;
let heartCount=0;
let selectedChar="erkek";

let messages=[
"Ä°yi ki varsÄ±n canÄ±m karÄ±m â¤ï¸",
"Seni Ã§ok seviyorum â¤ï¸",
"Sen benim huzurumsun â¤ï¸",
"HayatÄ±m seninle gÃ¼zel â¤ï¸",
"Kalbim hep seninle â¤ï¸"
];

function selectCharacter(char){
selectedChar=char;
document.getElementById("menu").style.display="none";
canvas.style.display="block";
startGame();
}

function startGame(){
score=0;
heartCount=0;
monsters=[];
hearts=[];
gameLoop();
}

function spawnMonster(){
if(Math.random()<0.01){ // CANAVAR SAYISI AZALTILDI
monsters.push({x:Math.random()*(canvas.width-40),y:-20});
}
}

function spawnHeart(){
if(Math.random()<0.02){
hearts.push({x:Math.random()*(canvas.width-40),y:-20});
}
}

function gameLoop(){

ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("Skor: "+score,10,25);

ctx.font="40px Arial";

if(selectedChar=="erkek")
ctx.fillText("ğŸ‘¨",player.x,player.y);
else
ctx.fillText("ğŸ‘©",player.x,player.y);

monsters.forEach(m=>{
m.y+=1.3;
ctx.fillText("ğŸ‘¾",m.x,m.y);

if(Math.abs(m.x-player.x)<35 && Math.abs(m.y-player.y)<35){
endGame();
}
});

hearts.forEach((h,i)=>{
h.y+=1.3;
ctx.fillText("â¤ï¸",h.x,h.y);

if(Math.abs(h.x-player.x)<35 && Math.abs(h.y-player.y)<35){

hearts.splice(i,1);
score+=10;
heartCount++;

playHeartSound();

if(heartCount%10==0){
showRandomMessage();
}
}
});

spawnMonster();
spawnHeart();

score++;

requestAnimationFrame(gameLoop);
}

function showRandomMessage(){

canvas.style.display="none";

let msg=messages[Math.floor(Math.random()*messages.length)];

document.getElementById("romanticText").innerText=msg;
document.getElementById("messageScreen").style.display="block";

setTimeout(()=>{
document.getElementById("messageScreen").style.display="none";
canvas.style.display="block";
},2000);
}

function endGame(){

canvas.style.display="none";

document.getElementById("finalScreen").style.display="block";
document.getElementById("lastScore").innerText=score;
}

function restart(){
document.getElementById("finalScreen").style.display="none";
document.getElementById("lovePhoto").style.display="none";
canvas.style.display="block";
startGame();
}

function openLetter(){
document.getElementById("lovePhoto").style.display="block";
}

function playHeartSound(){
let audio=new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");
audio.play();
}

document.addEventListener("touchmove",e=>{
player.x=e.touches[0].clientX-50;

if(player.x<0) player.x=0;
if(player.x>canvas.width-40) player.x=canvas.width-40;
});

</script>

</body>
</html>
