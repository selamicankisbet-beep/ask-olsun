<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta charset="UTF-8">
<title>Sen ve Ben</title>

<style>
body{
margin:0;
overflow:hidden;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
background:#87CEEB;
}

canvas{
width:360px;
height:640px;
border-radius:15px;
display:none;
}
</style>
</head>

<body>

<div id="menu" style="color:white;text-align:center;">
<h1>AÅK GÃœCÃœ â¤ï¸</h1>
<p>Karakter SeÃ§</p>

<button onclick="selectCharacter('erkek')">ğŸ‘¨ Selami</button>
<button onclick="selectCharacter('kadin')">ğŸ‘© Esra</button>

<p>ğŸ† En YÃ¼ksek Skor: <span id="highScore">0</span></p>
</div>

<div id="finalScreen" style="display:none;color:white;text-align:center;">
<h2>Oyun Bitti â¤ï¸</h2>
<p>Skor: <span id="lastScore"></span></p>
<button onclick="restart()">Tekrar Oyna</button>
</div>

<canvas id="game"></canvas>

<script>

let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");

canvas.width=360;
canvas.height=640;

let player={x:140,y:canvas.height-80};
let monsters=[];
let hearts=[];
let particles=[];
let score=0;
let speed=1.2;
let selectedChar="erkek";

/* HIGH SCORE */
let highScore=localStorage.getItem("askHighScore") || 0;
document.getElementById("highScore").innerText=highScore;

/* SES */
let hitSound=new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.wav");
let heartSound=new Audio("https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.wav");

/* TÄ°TREÅÄ°M */
function vibrate(){
if(navigator.vibrate){
navigator.vibrate(150);
}
}

function selectCharacter(char){
selectedChar=char;
document.getElementById("menu").style.display="none";
canvas.style.display="block";
startGame();
}

function startGame(){
score=0;
speed=1.2;
monsters=[];
hearts=[];
particles=[];
gameLoop();
}

/* ARKA PLAN GÃœNDÃœZ / GECE */
function drawBackground(){
if(score<800){
ctx.fillStyle="#87CEEB";
}else{
ctx.fillStyle="#0b1d3a";
}
ctx.fillRect(0,0,canvas.width,canvas.height);
}

/* CANAVAR */
function spawnMonster(){
monsters.push({
x:Math.random()*(canvas.width-40),
y:-20
});
}

/* KALP */
function spawnHeart(){
hearts.push({
x:Math.random()*(canvas.width-40),
y:-20
});
}

/* KALP PATLAMA EFEKTÄ° */
function spawnParticles(x,y){
for(let i=0;i<10;i++){
particles.push({
x:x,
y:y,
vx:(Math.random()-0.5)*4,
vy:(Math.random()-0.5)*4,
life:30
});
}
}

function gameLoop(){

drawBackground();

/* SKOR */
ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("Skor: "+score,10,30);

/* KARAKTER */
ctx.font="50px Arial";
if(selectedChar=="erkek")
ctx.fillText("ğŸ‘¨",player.x,player.y);
else
ctx.fillText("ğŸ‘©",player.x,player.y);

/* CANAVAR */
monsters.forEach(m=>{
m.y+=speed;
ctx.fillText("ğŸ‘¾",m.x,m.y);

if(Math.abs(m.x-player.x)<35 && Math.abs(m.y-player.y)<35){
hitSound.play();
vibrate();
endGame();
}
});

/* KALP */
hearts.forEach((h,index)=>{
h.y+=1;
ctx.fillText("â¤ï¸",h.x,h.y);

if(Math.abs(h.x-player.x)<35 && Math.abs(h.y-player.y)<35){
heartSound.play();
spawnParticles(h.x,h.y);
score+=50;
hearts.splice(index,1);
}
});

/* PARÃ‡ACIK EFEKTÄ° */
particles.forEach((p,index)=>{
p.x+=p.vx;
p.y+=p.vy;
p.life--;

ctx.fillText("ğŸ’–",p.x,p.y);

if(p.life<=0){
particles.splice(index,1);
}
});

/* SPAWN */
if(Math.random()<0.02) spawnMonster();
if(Math.random()<0.01) spawnHeart();

/* ZORLUK */
if(score%300==0) speed+=0.15;

score++;

requestAnimationFrame(gameLoop);
}

function endGame(){

if(score>highScore){
localStorage.setItem("askHighScore",score);
}

canvas.style.display="none";
document.getElementById("finalScreen").style.display="block";
document.getElementById("lastScore").innerText=score;
}

function restart(){
document.getElementById("finalScreen").style.display="none";
canvas.style.display="block";
startGame();
}

/* MOBÄ°L KONTROL */
document.addEventListener("touchmove",e=>{
player.x=e.touches[0].clientX-50;

if(player.x<0) player.x=0;
if(player.x>canvas.width-40) player.x=canvas.width-40;
});

</script>

</body>
</html>
