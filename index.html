<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta charset="UTF-8">
<title>Sen ve Ben</title>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

canvas {
    background: #1c4c2b;
    width: 360px;
    height: 640px;
    border-radius: 15px;
    display: none;
}

button{
padding:12px 20px;
font-size:18px;
margin:10px;
border:none;
border-radius:10px;
background:#ff4d6d;
color:white;
}

#envelope{
font-size:80px;
cursor:pointer;
}
</style>
</head>

<body>

<div id="menu">
<h1 style="color:white;">AÅK GÃœCÃœ â¤ï¸</h1>
<p style="color:white;">Karakter SeÃ§</p>

<button onclick="selectCharacter('erkek')">ğŸ‘¨ Selami</button>
<button onclick="selectCharacter('kadin')">ğŸ‘© Esra</button>
</div>

<div id="messageScreen" style="display:none; color:white; text-align:center;">
<h2 id="romanticText"></h2>
</div>

<div id="finalScreen" style="display:none; color:white; text-align:center;">
<h2>Oyun Bitti â¤ï¸</h2>
<p>Skor: <span id="lastScore"></span></p>

<div id="envelope" onclick="openLetter()">ğŸ’Œ</div>

<div id="letter" style="display:none;">
<p>
Selamiâ€™den sana Ã¶zel...  
Sen harikasÄ±n.  
HayatÄ±mÄ±n en gÃ¼zel mucizesisin.  
Ä°yi ki varsÄ±n canÄ±m karÄ±m â¤ï¸
</p>
</div>

<button onclick="restart()">Tekrar Oyna</button>
</div>

<canvas id="game"></canvas>

<script>

let canvas = document.getElementById("game");
let ctx = canvas.getContext("2d");

canvas.width = 360;
canvas.height = 640;

let player = {x:140, y:canvas.height-80};
let monsters = [];
let score = 0;
let selectedChar = "erkek";

let messages = [
"Ä°yi ki varsÄ±n canÄ±m karÄ±m â¤ï¸",
"Seni Ã§ok seviyorum â¤ï¸",
"Sen benim en gÃ¼zel mucizemsin â¤ï¸",
"Kalbim hep seninle â¤ï¸",
"Sen benim huzurumsun â¤ï¸"
];

function selectCharacter(char){
selectedChar = char;
document.getElementById("menu").style.display = "none";
canvas.style.display = "block";
startGame();
}

function startGame(){
score = 0;
monsters = [];
gameLoop();
}

function spawnMonster(){
monsters.push({
x: Math.random() * (canvas.width-40),
y: -20
});
}

function gameLoop(){

ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("Skor: "+score,10,30);

if(selectedChar=="erkek")
ctx.fillText("ğŸ‘¨",player.x,player.y);
else
ctx.fillText("ğŸ‘©",player.x,player.y);

monsters.forEach(m=>{

m.y += 1.2;

ctx.fillText("ğŸ‘¾",m.x,m.y);

if(Math.abs(m.x-player.x)<40 && Math.abs(m.y-player.y)<30){
endGame();
}

});

if(Math.random()<0.02) spawnMonster();

score++;

if(score % 200 == 0){
showRandomMessage();
}

requestAnimationFrame(gameLoop);
}

function showRandomMessage(){

canvas.style.display="none";

let msg = messages[Math.floor(Math.random()*messages.length)];
document.getElementById("romanticText").innerText = msg;

document.getElementById("messageScreen").style.display="block";

setTimeout(()=>{
document.getElementById("messageScreen").style.display="none";
canvas.style.display="block";
},2000);
}

function endGame(){
canvas.style.display="none";
document.getElementById("finalScreen").style.display="block";
document.getElementById("lastScore").innerText = score;
}

function restart(){
document.getElementById("finalScreen").style.display="none";
canvas.style.display="block";
startGame();
}

function openLetter(){
document.getElementById("letter").style.display="block";
}

document.addEventListener("touchmove",e=>{
player.x = e.touches[0].clientX - 50;

if(player.x < 0) player.x = 0;
if(player.x > canvas.width-40) player.x = canvas.width-40;
});

</script>

</body>
</html>
