<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>Sen ve Ben</title>

<style>
body{
margin:0;
overflow:hidden;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
background:#111;
}

canvas{
width:360px;
height:640px;
border-radius:15px;
display:none;
background:#1c4c2b;
}
</style>
</head>

<body>

<div id="menu" style="color:white;text-align:center;">
<h1>AÅK GÃœCÃœ â¤ï¸</h1>
<button onclick="selectCharacter('erkek')">ğŸ‘¨ Selami</button>
<button onclick="selectCharacter('kadin')">ğŸ‘© Esra</button>
</div>

<div id="messageScreen" style="display:none;color:white;text-align:center;">
<h2 id="romanticText"></h2>
</div>

<div id="finalScreen" style="display:none;color:white;text-align:center;">
<h2>Oyun Bitti â¤ï¸</h2>
<p>Skor: <span id="lastScore"></span></p>
<button onclick="restart()">Tekrar Oyna</button>
</div>

<canvas id="game"></canvas>

<script>

let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");

canvas.width=360;
canvas.height=640;

let player={x:140,y:canvas.height-80};
let monsters=[];
let hearts=[];
let score=0;
let speed=1.2;
let gameRunning=false;

let messages=[
"Seni Ã§ok seviyorum â¤ï¸",
"Ä°yi ki varsÄ±n â¤ï¸",
"HayatÄ±mÄ±n anlamÄ±sÄ±n â¤ï¸",
"Kalbim hep seninle â¤ï¸"
];

function selectCharacter(char){
selectedChar=char;
document.getElementById("menu").style.display="none";
canvas.style.display="block";
startGame();
}

function startGame(){
score=0;
speed=1.2;
monsters=[];
hearts=[];
gameRunning=true;
gameLoop();
}

function spawnMonster(){
monsters.push({x:Math.random()*(canvas.width-40),y:-20});
}

function spawnHeart(){
hearts.push({x:Math.random()*(canvas.width-40),y:-20});
}

function showMessage(text){

gameRunning=false;
canvas.style.display="none";

document.getElementById("romanticText").innerText=text;
document.getElementById("messageScreen").style.display="block";

setTimeout(()=>{
document.getElementById("messageScreen").style.display="none";
canvas.style.display="block";
gameRunning=true;
gameLoop();
},2000);
}

function gameLoop(){

if(!gameRunning) return;

ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("Skor: "+score,10,30);

ctx.font="50px Arial";
ctx.fillText("ğŸ‘¨",player.x,player.y);

/* CANAVAR */
monsters.forEach(m=>{
m.y+=speed;
ctx.fillText("ğŸ‘¾",m.x,m.y);

if(Math.abs(m.x-player.x)<35 && Math.abs(m.y-player.y)<35){
endGame();
}
});

/* KALP */
hearts.forEach((h,index)=>{
h.y+=1;
ctx.fillText("â¤ï¸",h.x,h.y);

if(Math.abs(h.x-player.x)<35 && Math.abs(h.y-player.y)<35){

let msg=messages[Math.floor(Math.random()*messages.length)];
showMessage(msg);

score+=50;
hearts.splice(index,1);
}
});

if(Math.random()<0.02) spawnMonster();
if(Math.random()<0.01) spawnHeart();

score++;

requestAnimationFrame(gameLoop);
}

function endGame(){
gameRunning=false;
canvas.style.display="none";
document.getElementById("finalScreen").style.display="block";
document.getElementById("lastScore").innerText=score;
}

function restart(){
document.getElementById("finalScreen").style.display="none";
canvas.style.display="block";
startGame();
}

document.addEventListener("touchmove",e=>{
player.x=e.touches[0].clientX-50;

if(player.x<0) player.x=0;
if(player.x>canvas.width-40) player.x=canvas.width-40;
});

</script>

</body>
</html>
